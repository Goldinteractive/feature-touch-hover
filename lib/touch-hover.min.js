!function e(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("touch-hover",[],n):"object"==typeof exports?exports["touch-hover"]=n():t["touch-hover"]=n()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function t(){return e.default}:function t(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){var o,i,r;!function(n,s){var c;i=[t],o=s,r="function"==typeof o?o.apply(t,i):o,!(void 0!==r&&(e.exports=r))}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r="data-force",s="touch",c="pen",u=2,a=3,l=null,d=[],p=!1,f=!1,h=!1;document.addEventListener("touchend",function(e){p=!0}),document.addEventListener("pointerdown",function(e){p=e.pointerType===s||e.pointerType===c}),document.addEventListener("MSPointerDown",function(e){p=e.pointerType===u||e.pointerType===a}),document.addEventListener("keydown",function(e){f=!0}),document.addEventListener("click",function(e){h||d.forEach(function(t){t._blur(e)}),p=!1,f=!1,h=!1});var v=function(e){function s(){return t(this,s),n(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return o(s,e),i(s,[{key:"init",value:function e(){d.push(this),this.openedByTouch=!1,this.openedByMouseenter=!1,this.initialActive=this.node.classList.contains(this.options.classActive),this.addEventListener(this.node,"mouseenter",this._mouseenterListener()),this.addEventListener(this.node,"mouseleave",this._mouseleaveListener()),this.addEventListener(this.node,"click",this._clickListener())}},{key:"_blur",value:function e(t){var n=document.createEvent("CustomEvent");return n.initCustomEvent("touch:blur",!0,!0,{originalEvent:t}),!!this.node.dispatchEvent(n)&&(this.initialActive=!1,this.openedByTouch=!1,this.openedByMouseenter=!1,this.node.classList.remove(this.options.classClicked),void this.node.classList.remove(this.options.classActive))}},{key:"_hover",value:function e(t){var n=this,o=document.createEvent("CustomEvent");return o.initCustomEvent("touch:hover",!0,!0,{originalEvent:t}),!!this.node.dispatchEvent(o)&&(l=this,d.forEach(function(e){n!==e&&e._blur(t)}),this.node.classList.remove(this.options.classClicked),void this.node.classList.add(this.options.classActive))}},{key:"_primaryClick",value:function e(t){var n=document.createEvent("CustomEvent");return n.initCustomEvent("touch:click",!0,!0,{originalEvent:t}),!!this.node.dispatchEvent(n)&&(this.initialActive=!1,this.openedByTouch=!1,this.openedByMouseenter=!1,this.node.classList.remove(this.options.classActive),void this.node.classList.add(this.options.classClicked))}},{key:"_mouseenterListener",value:function e(){var t=this;return function(e){p||(t.openedByMouseenter=!0,t._hover(e))}}},{key:"_mouseleaveListener",value:function e(){var t=this;return function(e){t.openedByMouseenter&&t._blur(e)}}},{key:"_clickListener",value:function e(){var t=this;return function(e){h=!0,null!==t.node.getAttribute(r)||(base.utils.check.isFunction(t.options.forcePrimaryClick)?t.options.forcePrimaryClick():t.options.forcePrimaryClick)||t.node.classList.contains(t.options.classActive)&&(!p||p&&t.openedByTouch||t.initialActive)?t._primaryClick(e):(e.preventDefault(),t.openedByMouseenter||t._hover(e),p&&(t.openedByTouch=!0,t.openedByMouseenter=!1))}}}]),s}(base.features.Feature);v.defaultOptions={classActive:"-active",classClicked:"-clicked",forcePrimaryClick:null},e.default=v})}])});
//# sourceMappingURL=touch-hover.min.js.map