{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 9e3e12db087ca3b01f2d","webpack:///./src/index.js"],"names":["ATTR_FORCE_PRIMARY_CLICK","POINTER_TOUCH","POINTER_PEN","IE10_POINTER_TOUCH","IE10_POINTER_PEN","current","instances","touchUsed","keyboardUsed","clicked","document","addEventListener","e","pointerType","forEach","instance","_blur","TouchHover","push","openedByTouch","openedByMouseenter","initialActive","node","classList","contains","options","classActive","_mouseenterListener","_mouseleaveListener","_clickListener","event","createEvent","initCustomEvent","originalEvent","dispatchEvent","base","utils","check","isFunction","resetOpen","resetOpenOnMouseBlur","type","currentTarget","resetOpenOnClickBlur","resetOpenOnOuterClickBlur","call","resetActiveOnMouseBlur","resetActiveOnClickBlur","resetActiveOnOuterClickBlur","remove","classClicked","add","_hover","isOpen","openCheck","getAttribute","forcePrimaryClick","_primaryClick","preventDefault","features","Feature","defaultOptions"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChEA,MAAMA,2BAA2B,YAAjC;;AAEA,MAAMC,gBAAgB,OAAtB;AACA,MAAMC,cAAc,KAApB;;AAEA,MAAMC,qBAAqB,CAA3B;AACA,MAAMC,mBAAmB,CAAzB;;AAEA,MAAIC,UAAU,IAAd;AACA,MAAIC,YAAY,EAAhB;AACA,MAAIC,YAAY,KAAhB;AACA,MAAIC,eAAe,KAAnB;AACA,MAAIC,UAAU,KAAd;;AAEAC,WAASC,gBAAT,CAA0B,UAA1B,EAAsC,UAASC,CAAT,EAAY;AAChDL,gBAAY,IAAZ;AACD,GAFD;;AAIAG,WAASC,gBAAT,CAA0B,aAA1B,EAAyC,UAASC,CAAT,EAAY;AACnDL,gBAAYK,EAAEC,WAAF,KAAkBZ,aAAlB,IAAmCW,EAAEC,WAAF,KAAkBX,WAAjE;AACD,GAFD;;AAIAQ,WAASC,gBAAT,CAA0B,eAA1B,EAA2C,UAASC,CAAT,EAAY;AACrDL,gBAAYK,EAAEC,WAAF,KAAkBV,kBAAlB,IAAwCS,EAAEC,WAAF,KAAkBT,gBAAtE;AACD,GAFD;;AAIAM,WAASC,gBAAT,CAA0B,SAA1B,EAAqC,UAASC,CAAT,EAAY;AAC/CJ,mBAAe,IAAf;AACD,GAFD;;AAIAE,WAASC,gBAAT,CAA0B,OAA1B,EAAmC,UAASC,CAAT,EAAY;AAC7C,QAAI,CAACH,OAAL,EAAc;AACZH,gBAAUQ,OAAV,CAAkB,UAACC,QAAD,EAAc;AAC9BA,iBAASC,KAAT,CAAeJ,CAAf;AACD,OAFD;AAGD;;AAED;AACAL,gBAAY,KAAZ;AACAC,mBAAe,KAAf;AACAC,cAAU,KAAV;AACD,GAXD;;AAaA;;;;MAGMQ,U;;;;;;;;;;;6BAEG;AACLX,kBAAUY,IAAV,CAAe,IAAf;;AAEA,aAAKC,aAAL,GAAqB,KAArB;AACA,aAAKC,kBAAL,GAA0B,KAA1B;;AAEA,aAAKC,aAAL,GAAqB,KAAKC,IAAL,CAAUC,SAAV,CAAoBC,QAApB,CAA6B,KAAKC,OAAL,CAAaC,WAA1C,CAArB;;AAEA,aAAKf,gBAAL,CAAsB,KAAKW,IAA3B,EAAiC,YAAjC,EAA+C,KAAKK,mBAAL,EAA/C;AACA,aAAKhB,gBAAL,CAAsB,KAAKW,IAA3B,EAAiC,YAAjC,EAA+C,KAAKM,mBAAL,EAA/C;AACA,aAAKjB,gBAAL,CAAsB,KAAKW,IAA3B,EAAiC,OAAjC,EAA0C,KAAKO,cAAL,EAA1C;AACD;;;4BAEKjB,C,EAAG;AACP,YAAIkB,QAAQpB,SAASqB,WAAT,CAAqB,aAArB,CAAZ;AACAD,cAAME,eAAN,CAAsB,YAAtB,EAAoC,IAApC,EAA0C,IAA1C,EAAgD;AAC9CC,yBAAerB;AAD+B,SAAhD;;AAIA,YAAI,CAAC,KAAKU,IAAL,CAAUY,aAAV,CAAwBJ,KAAxB,CAAL,EAAqC;AACnC,iBAAO,KAAP;AACD;;AAED,aAAKX,aAAL,GAAqB,KAArB;AACA,aAAKC,kBAAL,GAA0B,KAA1B;;AAEA,YAAIe,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,UAAjB,CAA4B,KAAKb,OAAL,CAAac,SAAzC,KACI,KAAKd,OAAL,CAAae,oBAAb,KACK5B,EAAE6B,IAAF,KAAW,YAAX,IAA2B7B,EAAE6B,IAAF,KAAW,YAAvC,IACI7B,EAAE6B,IAAF,KAAW,OAAX,IAAsB7B,EAAE8B,aAAF,KAAoBhC,QAA1C,IAAsD,KAAKe,OAAL,CAAakB,oBADvE,IAEI/B,EAAE6B,IAAF,KAAW,OAAX,IAAsB7B,EAAE8B,aAAF,KAAoBhC,QAA1C,IAAsD,KAAKe,OAAL,CAAamB,yBAH3E,CADR,EAKE;AACA,eAAKnB,OAAL,CAAac,SAAb,CAAuBM,IAAvB,CAA4B,IAA5B;AACD;;AAED,YAAK,KAAKpB,OAAL,CAAaqB,sBAAb,KACKlC,EAAE6B,IAAF,KAAW,YAAX,IAA2B7B,EAAE6B,IAAF,KAAW,YAD3C,KAEQ7B,EAAE6B,IAAF,KAAW,OAAX,IAAsB7B,EAAE8B,aAAF,KAAoBhC,QAA1C,IAAsD,KAAKe,OAAL,CAAasB,sBAF3E,IAGQnC,EAAE6B,IAAF,KAAW,OAAX,IAAsB7B,EAAE8B,aAAF,KAAoBhC,QAA1C,IAAsD,KAAKe,OAAL,CAAauB,2BAHhF,EAIE;AACA,eAAK3B,aAAL,GAAqB,KAArB;AACA,eAAKC,IAAL,CAAUC,SAAV,CAAoB0B,MAApB,CAA2B,KAAKxB,OAAL,CAAaC,WAAxC;AACD;;AAED,aAAKJ,IAAL,CAAUC,SAAV,CAAoB0B,MAApB,CAA2B,KAAKxB,OAAL,CAAayB,YAAxC;AACD;;;6BAEMtC,C,EAAG;AAAA;;AACR,YAAIkB,QAAQpB,SAASqB,WAAT,CAAqB,aAArB,CAAZ;AACAD,cAAME,eAAN,CAAsB,aAAtB,EAAqC,IAArC,EAA2C,IAA3C,EAAiD;AAC/CC,yBAAerB;AADgC,SAAjD;;AAIA,YAAI,CAAC,KAAKU,IAAL,CAAUY,aAAV,CAAwBJ,KAAxB,CAAL,EAAqC;AACnC,iBAAO,KAAP;AACD;;AAEDzB,kBAAU,IAAV;;AAEAC,kBAAUQ,OAAV,CAAkB,UAACC,QAAD,EAAc;AAC9B,cAAI,WAASA,QAAb,EAAuB;AACrBA,qBAASC,KAAT,CAAeJ,CAAf;AACD;AACF,SAJD;;AAMA,aAAKU,IAAL,CAAUC,SAAV,CAAoB0B,MAApB,CAA2B,KAAKxB,OAAL,CAAayB,YAAxC;AACA,aAAK5B,IAAL,CAAUC,SAAV,CAAoB4B,GAApB,CAAwB,KAAK1B,OAAL,CAAaC,WAArC;AACD;;;oCAEad,C,EAAG;AACf,YAAIkB,QAAQpB,SAASqB,WAAT,CAAqB,aAArB,CAAZ;AACAD,cAAME,eAAN,CAAsB,aAAtB,EAAqC,IAArC,EAA2C,IAA3C,EAAiD;AAC/CC,yBAAerB;AADgC,SAAjD;;AAIA,YAAI,CAAC,KAAKU,IAAL,CAAUY,aAAV,CAAwBJ,KAAxB,CAAL,EAAqC;AACnC,iBAAO,KAAP;AACD;;AAED,aAAKT,aAAL,GAAqB,KAArB;AACA,aAAKF,aAAL,GAAqB,KAArB;AACA,aAAKC,kBAAL,GAA0B,KAA1B;;AAEA,YAAIe,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,UAAjB,CAA4B,KAAKb,OAAL,CAAac,SAAzC,CAAJ,EAAyD;AACvD,eAAKd,OAAL,CAAac,SAAb,CAAuBM,IAAvB,CAA4B,IAA5B;AACD;;AAED,aAAKvB,IAAL,CAAUC,SAAV,CAAoB0B,MAApB,CAA2B,KAAKxB,OAAL,CAAaC,WAAxC;AACA,aAAKJ,IAAL,CAAUC,SAAV,CAAoB4B,GAApB,CAAwB,KAAK1B,OAAL,CAAayB,YAArC;AACD;;;4CAEqB;AAAA;;AACpB,eAAO,UAACtC,CAAD,EAAO;AACZ,cAAI,CAACL,SAAL,EAAgB;AACd,mBAAKa,kBAAL,GAA0B,IAA1B;AACA,mBAAKgC,MAAL,CAAYxC,CAAZ;AACD;AACF,SALD;AAMD;;;4CAEqB;AAAA;;AACpB,eAAO,UAACA,CAAD,EAAO;AACZ,cAAI,OAAKQ,kBAAT,EAA6B;AAC1B,mBAAKJ,KAAL,CAAWJ,CAAX;AACF;AACF,SAJD;AAKD;;;uCAEgB;AAAA;;AACf,eAAO,UAACA,CAAD,EAAO;AACZH,oBAAU,IAAV;;AAEA,cAAI4C,SAAUlB,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,UAAjB,CAA4B,OAAKb,OAAL,CAAa6B,SAAzC,KACG,OAAK7B,OAAL,CAAa6B,SAAb,CAAuBT,IAAvB,QADjB;;AAGA,cAAI,OAAKvB,IAAL,CAAUiC,YAAV,CAAuBvD,wBAAvB,MAAqD,IAArD,KACImC,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,UAAjB,CAA4B,OAAKb,OAAL,CAAa+B,iBAAzC,IACC,OAAK/B,OAAL,CAAa+B,iBAAb,CAA+BX,IAA/B,QADD,GAC6C,OAAKpB,OAAL,CAAa+B,iBAF9D,KAGI,CAAC,OAAKlC,IAAL,CAAUC,SAAV,CAAoBC,QAApB,CAA6B,OAAKC,OAAL,CAAaC,WAA1C,KAA0D2B,MAA3D,MACI,CAAC9C,SAAD,IACIA,aAAa,OAAKY,aADtB,IAEG,OAAKE,aAFR,IAGIgC,UAAU,CAAC,OAAKlC,aAAhB,IAAiC,CAAC,OAAKC,kBAJ/C,CAHR,EASE;AACA,mBAAKqC,aAAL,CAAmB7C,CAAnB;AACD,WAXD,MAWO;AACLA,cAAE8C,cAAF;;AAEA,gBAAI,CAAC,OAAKtC,kBAAV,EAA8B;AAAE;AAC9B,qBAAKgC,MAAL,CAAYxC,CAAZ;AACD;;AAED,gBAAIL,SAAJ,EAAe;AACb,qBAAKY,aAAL,GAAqB,IAArB;AACA,qBAAKC,kBAAL,GAA0B,KAA1B;AACD;AACF;AAEF,SA9BD;AA+BD;;;;IA9IsBe,KAAKwB,QAAL,CAAcC,O;;AAkJvC;;;AAGA3C,aAAW4C,cAAX,GAA4B;AAC1BnC,iBAAa,SADa;AAE1BwB,kBAAc,UAFY;AAG1BM,uBAAmB,IAHO;AAI1BF,eAAW,IAJe;AAK1Bf,eAAW,IALe;AAM1BC,0BAAsB,IANI;AAO1BG,0BAAsB,IAPI;AAQ1BC,+BAA2B,KARD;AAS1BE,4BAAwB,IATE;AAU1BC,4BAAwB,IAVE;AAW1BC,iCAA6B;AAXH,GAA5B;;oBAce/B,U","file":"touch-hover.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"touch-hover\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"touch-hover\"] = factory();\n\telse\n\t\troot[\"touch-hover\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9e3e12db087ca3b01f2d","const ATTR_FORCE_PRIMARY_CLICK = 'data-force'\n\nconst POINTER_TOUCH = 'touch'\nconst POINTER_PEN = 'pen'\n\nconst IE10_POINTER_TOUCH = 2\nconst IE10_POINTER_PEN = 3\n\nlet current = null\nlet instances = []\nlet touchUsed = false\nlet keyboardUsed = false\nlet clicked = false\n\ndocument.addEventListener('touchend', function(e) {\n  touchUsed = true\n})\n\ndocument.addEventListener('pointerdown', function(e) {\n  touchUsed = e.pointerType === POINTER_TOUCH || e.pointerType === POINTER_PEN\n})\n\ndocument.addEventListener('MSPointerDown', function(e) {\n  touchUsed = e.pointerType === IE10_POINTER_TOUCH || e.pointerType === IE10_POINTER_PEN\n})\n\ndocument.addEventListener('keydown', function(e) {\n  keyboardUsed = true\n})\n\ndocument.addEventListener('click', function(e) {\n  if (!clicked) {\n    instances.forEach((instance) => {\n      instance._blur(e)\n    })\n  }\n\n  // reset flags\n  touchUsed = false\n  keyboardUsed = false\n  clicked = false\n})\n\n/**\n * Touch hover feature class.\n */\nclass TouchHover extends base.features.Feature {\n\n  init() {\n    instances.push(this)\n\n    this.openedByTouch = false\n    this.openedByMouseenter = false\n\n    this.initialActive = this.node.classList.contains(this.options.classActive)\n\n    this.addEventListener(this.node, 'mouseenter', this._mouseenterListener())\n    this.addEventListener(this.node, 'mouseleave', this._mouseleaveListener())\n    this.addEventListener(this.node, 'click', this._clickListener())\n  }\n\n  _blur(e) {\n    let event = document.createEvent('CustomEvent')\n    event.initCustomEvent('touch:blur', true, true, {\n      originalEvent: e\n    })\n\n    if (!this.node.dispatchEvent(event)) {\n      return false\n    }\n\n    this.openedByTouch = false\n    this.openedByMouseenter = false\n\n    if (base.utils.check.isFunction(this.options.resetOpen)\n        && (this.options.resetOpenOnMouseBlur\n            && ((e.type === 'mouseleave' || e.type === 'mouseenter')\n                || (e.type === 'click' && e.currentTarget !== document && this.options.resetOpenOnClickBlur)\n                || (e.type === 'click' && e.currentTarget === document && this.options.resetOpenOnOuterClickBlur)))\n    ) {\n      this.options.resetOpen.call(this)\n    }\n\n    if ((this.options.resetActiveOnMouseBlur\n         && ((e.type === 'mouseleave' || e.type === 'mouseenter'))\n             || (e.type === 'click' && e.currentTarget !== document && this.options.resetActiveOnClickBlur)\n             || (e.type === 'click' && e.currentTarget === document && this.options.resetActiveOnOuterClickBlur))\n    ) {\n      this.initialActive = false\n      this.node.classList.remove(this.options.classActive)\n    }\n\n    this.node.classList.remove(this.options.classClicked)\n  }\n\n  _hover(e) {\n    let event = document.createEvent('CustomEvent')\n    event.initCustomEvent('touch:hover', true, true, {\n      originalEvent: e\n    })\n\n    if (!this.node.dispatchEvent(event)) {\n      return false\n    }\n\n    current = this\n\n    instances.forEach((instance) => {\n      if (this !== instance) {\n        instance._blur(e)\n      }\n    })\n\n    this.node.classList.remove(this.options.classClicked)\n    this.node.classList.add(this.options.classActive)\n  }\n\n  _primaryClick(e) {\n    let event = document.createEvent('CustomEvent')\n    event.initCustomEvent('touch:click', true, true, {\n      originalEvent: e\n    })\n\n    if (!this.node.dispatchEvent(event)) {\n      return false\n    }\n\n    this.initialActive = false\n    this.openedByTouch = false\n    this.openedByMouseenter = false\n\n    if (base.utils.check.isFunction(this.options.resetOpen)) {\n      this.options.resetOpen.call(this)\n    }\n\n    this.node.classList.remove(this.options.classActive)\n    this.node.classList.add(this.options.classClicked)\n  }\n\n  _mouseenterListener() {\n    return (e) => {\n      if (!touchUsed) {\n        this.openedByMouseenter = true\n        this._hover(e)\n      }\n    }\n  }\n\n  _mouseleaveListener() {\n    return (e) => {\n      if (this.openedByMouseenter) {\n         this._blur(e)\n      }\n    }\n  }\n\n  _clickListener() {\n    return (e) => {\n      clicked = true\n\n      let isOpen = (base.utils.check.isFunction(this.options.openCheck)\n                    && this.options.openCheck.call(this))\n\n      if (this.node.getAttribute(ATTR_FORCE_PRIMARY_CLICK) !== null\n          || (base.utils.check.isFunction(this.options.forcePrimaryClick)\n             ? this.options.forcePrimaryClick.call(this) : this.options.forcePrimaryClick)\n          || ((this.node.classList.contains(this.options.classActive) || isOpen)\n              && (!touchUsed\n                  || (touchUsed && this.openedByTouch)\n                  || this.initialActive\n                  || (isOpen && !this.openedByTouch && !this.openedByMouseenter))\n          )\n      ) {\n        this._primaryClick(e)\n      } else {\n        e.preventDefault()\n\n        if (!this.openedByMouseenter) { // not already opened by mouseenter\n          this._hover(e)\n        }\n\n        if (touchUsed) {\n          this.openedByTouch = true\n          this.openedByMouseenter = false\n        }\n      }\n\n    }\n  }\n\n}\n\n/**\n * Default feature options.\n */\nTouchHover.defaultOptions = {\n  classActive: '-active',\n  classClicked: '-clicked',\n  forcePrimaryClick: null,\n  openCheck: null,\n  resetOpen: null,\n  resetOpenOnMouseBlur: true,\n  resetOpenOnClickBlur: true,\n  resetOpenOnOuterClickBlur: false,\n  resetActiveOnMouseBlur: true,\n  resetActiveOnClickBlur: true,\n  resetActiveOnOuterClickBlur: true\n}\n\nexport default TouchHover\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}